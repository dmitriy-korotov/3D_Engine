cmake_minimum_required(VERSION 3.26)



set(ENGINE_NET_LIB net CACHE INTERNAL "")

project(${ENGINE_NET_LIB})



set(ENGINE_NET_LIB_HEADERS

		include/engine/net/net.hpp



		include/engine/net/util/fwd.hpp
		include/engine/net/util/ip.hpp



		include/engine/net/http/fwd/url.hpp
		include/engine/net/http/fwd/url_decoder.hpp
		include/engine/net/http/fwd/basic_http_message.hpp
		include/engine/net/http/fwd/request.hpp
		include/engine/net/http/fwd/response.hpp
		include/engine/net/http/fwd/string_body.hpp
		include/engine/net/http/fwd/json_body.hpp
		include/engine/net/http/fwd/basic_http_message_parser.hpp
		include/engine/net/http/fwd/request_parser.hpp
		include/engine/net/http/fwd/response_parser.hpp
		
		include/engine/net/http/fwd/handlers_context.hpp
		include/engine/net/http/fwd/http_server.hpp
		include/engine/net/http/fwd/session.hpp
		include/engine/net/http/fwd/http_client.hpp

		include/engine/net/http/fwd.hpp
		include/engine/net/http/url.hpp
		include/engine/net/http/url_decoder.hpp
		include/engine/net/http/basic_http_message.hpp
		include/engine/net/http/request.hpp
		include/engine/net/http/response.hpp
		include/engine/net/http/string_body.hpp
		include/engine/net/http/json_body.hpp
		include/engine/net/http/basic_http_message_parser.hpp
		include/engine/net/http/request_parser.hpp
		include/engine/net/http/response_parser.hpp

		include/engine/net/http/handlers_context.hpp
		include/engine/net/http/http_server.hpp
		include/engine/net/http/session.hpp
		include/engine/net/http/http_client.hpp



		include/engine/net/fwd.hpp
	
)

set(ENGINE_NET_LIB_SOURCES

		src/engine/net/util/ip.cpp



		src/engine/net/http/url.cpp
		src/engine/net/http/url_decoder.cpp
		src/engine/net/http/basic_http_message.cpp
		src/engine/net/http/request.cpp
		src/engine/net/http/response.cpp
		src/engine/net/http/string_body.cpp
		src/engine/net/http/json_body.cpp

		src/engine/net/http/handlers_context.cpp
		src/engine/net/http/http_server.cpp
		src/engine/net/http/session.cpp
		src/engine/net/http/http_client.cpp
	
)

set(ENGINE_NET_LIB_ALL_FILES ${ENGINE_NET_LIB_HEADERS} ${ENGINE_NET_LIB_SOURCES})



source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${ENGINE_NET_LIB_ALL_FILES})



add_library(${ENGINE_NET_LIB} STATIC ${ENGINE_NET_LIB_ALL_FILES})
add_library(${ENGINE_ALIAS}::${ENGINE_NET_LIB} ALIAS ${ENGINE_NET_LIB})

target_include_directories(${ENGINE_NET_LIB} PUBLIC include)

target_link_libraries(${ENGINE_NET_LIB} PUBLIC
			${ENGINE_ALIAS}::${ENGINE_UTILITY_LIB}
            asio
)

target_compile_features(${ENGINE_NET_LIB} PUBLIC cxx_std_20)



set_target_properties(${ENGINE_NET_LIB} PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${ENGINE_BINARY_DIR})