cmake_minimum_required(VERSION 3.26)



set(ENGINE_PROJECT_NAME uengine)
set(ENGINE_ALIAS ${ENGINE_PROJECT_NAME})

set(ENGINE_EXTERNAL_LIBS_DIRECTORY ../external)



################################################################ ADDING EXTERNAL SUBDIRECTORIES #############################################################################



add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/spdlog ${CMAKE_CURRENT_BINARY_DIR}/spdlog)

set(JSON_BuildTests OFF CACHE INTERNAL "")

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/json ${CMAKE_CURRENT_BINARY_DIR}/json)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/stb ${CMAKE_CURRENT_BINARY_DIR}/stb)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/glm ${CMAKE_CURRENT_BINARY_DIR}/glm)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/glfw ${CMAKE_CURRENT_BINARY_DIR}/glfw)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/glad ${CMAKE_CURRENT_BINARY_DIR}/glad)

set(ASSIMP_BUILD_TESTS OFF)
set(ASSIMP_INSTALL OFF)
set(BUILD_SHARED_LIBS OFF)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/assimp ${CMAKE_CURRENT_BINARY_DIR}/assimp)

add_subdirectory(${ENGINE_EXTERNAL_LIBS_DIRECTORY}/imgui ${CMAKE_CURRENT_BINARY_DIR}/imgui)



################################################################ ADDING ENGINE SUBDIRECTORIES ###############################################################################



add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/log ${CMAKE_CURRENT_BINARY_DIR}/log)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/error ${CMAKE_CURRENT_BINARY_DIR}/error)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/utility ${CMAKE_CURRENT_BINARY_DIR}/utility)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/ecs ${CMAKE_CURRENT_BINARY_DIR}/ecs)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/window ${CMAKE_CURRENT_BINARY_DIR}/window)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/render ${CMAKE_CURRENT_BINARY_DIR}/render)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/application ${CMAKE_CURRENT_BINARY_DIR}/application)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/scene ${CMAKE_CURRENT_BINARY_DIR}/scene)



############################################################# CREATING ENGINE INTERFACE LIBRARY #############################################################################



add_library(${ENGINE_ALIAS} INTERFACE)

target_link_libraries(${ENGINE_ALIAS} INTERFACE 

			${ENGINE_ALIAS}::${ENGINE_ERROR_LIB}
			${ENGINE_ALIAS}::${ENGINE_LOG_LIB}
			${ENGINE_ALIAS}::${ENGINE_UTILITY_LIB}
			${ENGINE_ALIAS}::${ENGINE_WINDOW_LIB}
			${ENGINE_ALIAS}::${ENGINE_ECS_LIB}
			${ENGINE_ALIAS}::${ENGINE_RENDER_LIB}
			${ENGINE_ALIAS}::${ENGINE_APPLICATION_LIB}
			${ENGINE_ALIAS}::${ENGINE_SCENE_LIB}

)